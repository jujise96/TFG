@model Juego

@{
    ViewData["Title"] = "Editar Juego";
}

<div class="text-center">
    <h1 class="display-4">Editar Juego</h1>
</div>

<div class="container mt-4">

    <form asp-action="ModificarJuego" method="post" enctype="multipart/form-data">
        @* Si la Id ya existe (estamos editando), incluirla como campo oculto *@
        @if (Model?.Id > 0)
        {
            <input type="hidden" asp-for="Id" />
        }

        <div class="form-group">
            <label asp-for="IdElem"></label>
            <input asp-for="IdElem" class="form-control" value="@Model?.IdElem" />
            <span asp-validation-for="IdElem" class="text-danger"></span>
        </div>

        <div class="form-group">
            <label asp-for="Nombre"></label>
            <input asp-for="Nombre" class="form-control" value="@Model?.Nombre" />
            <span asp-validation-for="Nombre" class="text-danger"></span>
        </div>

        <div class="form-group">
            <label asp-for="Descripcion"></label>
            <textarea asp-for="Descripcion" class="form-control">@Model?.Descripcion</textarea>
            <span asp-validation-for="Descripcion" class="text-danger"></span>
        </div>

        <div class="form-group">
            <label for="ImagenFile">Imagen Actual:</label>
            @if (!string.IsNullOrEmpty(Model?.Imagen))
            {
                <div class="mb-2">
                    <img src="@Model.Imagen" alt="Imagen actual del juego" class="img-thumbnail" style="max-width: 200px;" />
                </div>
            }
            else
            {
                <p>No hay imagen actual.</p>
            }

            <label for="ImagenFile">Cambiar Imagen (opcional):</label>
            @* Este input es para la nueva imagen. El "name" debe coincidir con la propiedad IFormFile en tu ViewModel/Model *@
            <input type="file" id="ImagenFile" name="ImagenFile" class="form-control" accept="image/*" />
            <span class="text-danger" asp-validation-for="Imagen"></span> @* La validación para la propiedad string 'Imagen' en tu modelo/ViewModel *@

            @* IMPORTANTE: Campo oculto para la URL de la imagen actual.
                Esto es crucial si el usuario no sube una nueva imagen pero quieres mantener la existente.
                Tu controlador debe leer este campo si ImagenFile es null. *@
            <input type="hidden" asp-for="Imagen" value="@Model?.Imagen" />
        </div>


        <div class="form-group">
            <label asp-for="Bugs"></label>
            <input asp-for="Bugs" class="form-control" value="@Model?.Bugs" />
            <span asp-validation-for="Bugs" class="text-danger"></span>
        </div>

        <button type="submit" class="btn btn-primary">Guardar Cambios</button>
        <a asp-action="Index" class="btn btn-secondary">Cancelar</a>
    </form>

</div>