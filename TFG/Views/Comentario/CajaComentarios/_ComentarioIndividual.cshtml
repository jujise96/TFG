@model TFG.Models.ComentarioViewModel

<li class="media mb-3 list-unstyled">
    <div class="media-body">
        <h5 class="mt-0 mb-1">Usuario @Model.NombreUsuario - @Model.FechaCreacion.ToString("dd/MM/yyyy HH:mm")</h5>
        <p>@Model.Mensaje</p>
        @if (User.Identity.IsAuthenticated)
        {
            @if (Model.NombreUsuario == User.Identity.Name || User.IsInRole("Admin"))
            {
                <button class="btn btn-sm btn-danger btn-eliminar-comentario" data-comentario-id="@Model.Id">Eliminar</button>
            }
            <button class="btn btn-sm btn-outline-primary btn-responder" data-comentario-id="@Model.Id">Responder</button>
            <div id="respuesta-form-@Model.Id" class="mt-2 d-none">
                <div class="form-group">
                    <textarea class="form-control mensaje-respuesta" rows="2" placeholder="Escribe tu respuesta aquí..."></textarea>
                </div>
                <button class="btn btn-sm btn-primary btn-enviar-respuesta" data-padre-id="@Model.Id">Enviar respuesta</button>
                <button class="btn btn-sm btn-secondary btn-cancelar-respuesta">Cancelar</button>
                <div id="mensaje-respuesta-@Model.Id" class="mt-2"></div>
            </div>
        }
        @if (Model.Respuestas.Any())
        {
            <button class="btn btn-sm btn-link btn-mostrar-respuestas" data-comentario-id="@Model.Id">
                Ver @Model.Respuestas.Count() respuestas
            </button>
            <ul id="respuestas-de-@Model.Id" class="ml-5 d-none">
                @foreach (var respuesta in Model.Respuestas)
                {
                    @await Html.PartialAsync("CajaComentarios/_ComentarioIndividual", respuesta)
                }
            </ul>
        }
    </div>
</li>